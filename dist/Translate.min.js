!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Translate=e():t.Translate=e()}(this,function(){return function(n){var o={};function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";var o=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),r=s(n(1)),i=s(n(2));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.elbindEvent(t),e.createTranslateModal(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r.default),o(n,[{key:"elbindEvent",value:function(t){var e=this;t?(this.Element=document.querySelector(t),this.Element.addEventListener("mouseup",function(t){return e.onMouseUpAction(t)})):(this.Element=document.body,this.Element.addEventListener("mouseup",function(t){return e.onMouseUpAction(t)}))}},{key:"onMouseUpAction",value:function(t){this.Text&&(this.Text=""),this.Text=this.getSelectionText(),this.Text?(this.setTextFrom(),this.setContent("翻译中..."),this.TranslateAction=null,this.TranslateAction=new i.default({text:this.Text,target:t,emitter:this,element:this.Element,modal:this.TranslateModal})):this.hideModal()}},{key:"getSelectionText",value:function(){return document.selection?document.selection.createRange().text:window.getSelection().toString()}},{key:"createTranslateModal",value:function(){var t=this;if(this.TranslateModal=document.querySelector(".translateModal"),!this.TranslateModal)throw"缺少翻译弹窗dom节点,";this.TranslateModal.style.opacity=0,this.TranslateModal.style.position="absolute",this.TranslateModal.addEventListener("mouseup",function(t){return t.stopPropagation()}),this.closeBtn=document.querySelector("#translate-close"),this.closeBtn&&this.closeBtn.addEventListener("click",function(){t.hideModal()})}},{key:"hideModal",value:function(){this.TranslateModal.style.opacity=0,this.setContent("")}},{key:"setContent",value:function(t){var e=document.querySelector(".translateModal #translate-result");if(!e)throw"缺少显示翻译内容的节点， 节点id为translate-content";e.innerHTML=t}},{key:"setTextFrom",value:function(){var t=document.querySelector(".translateModal #translate-from");if(!t)throw"缺少显示原内容的节点， 节点id为translate-from";t.innerHTML=this.Text}}]),n}();t.exports=a},function(t,e,n){"use strict";var o=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subs={}}return o(t,[{key:"on",value:function(t,e){this.subs[t]||(this.subs[t]=[],this.subs[t].push(e))}},{key:"trigger",value:function(t,e){this.subs[t]&&this.subs[t].forEach(function(t){t(e)})}},{key:"once",value:function(r,i){var s=this;this.subs[r]||(this.subs[r]=[],this.subs[r].push(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=i.apply(null,e);return s.off(r,i),o}))}},{key:"off",value:function(t,e){if(!this.subs[t]){var n=this.subs[t].findIndex(function(t){return t===e});this.subs[t].splice(n,1),this.subs[t].length||delete this.subs[t]}}}]),t}();t.exports=r},function(t,e,n){"use strict";var o=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();var r=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.initOptions(t),this.text&&(this.showTranslateBox(),this.successLifeCycle())}return o(e,[{key:"initOptions",value:function(t){this.text=t.text,this.target=t.target,this.emitter=t.emitter,this.element=t.element,this.modal=t.modal}},{key:"showTranslateBox",value:function(){var t=void 0;t=this.emitter.TranslateModal.clientWidth+this.target.pageX>document.body.offsetWidth?document.body.offsetWidth-this.emitter.TranslateModal.clientWidth:this.target.pageX;var e=void 0;e=this.emitter.TranslateModal.clientHeight+this.target.pageY+10>document.body.offsetHeight?this.target.pageY-this.emitter.TranslateModal.clientHeight-10:this.target.pageY+10,this.modal.style.left=t+"px",this.modal.style.top=e+"px",this.modal.style.opacity=1}},{key:"successLifeCycle",value:function(){this.emitter.trigger("success",this.text)}}]),e}();t.exports=r}])});